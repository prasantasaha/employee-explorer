{"version":3,"sources":["views/explorer/Explorer.tsx","views/common/NoMatch.tsx","OrgChart.ts","views/overview/Overview.tsx","Routes.tsx","App.tsx","index.tsx"],"names":["Explorer","useState","searchTerm","setSearchTerm","history","useHistory","showOverview","employeeName","push","process","className","id","aria-labelledby","placeholder","onChange","event","target","value","onKeyUp","key","onClick","icon","faSearch","Employee","details","reportsTo","manages","this","hashCode","name","title","OrganizationChart","employeeDetails","root","callback","recurse","employee","i","length","queue","Queue","enqueue","dequeue","traversal","call","managerId","child","contains","Error","subordinateNames","Set","traverseBF","add","delete","Array","from","elements","shift","str","split","reduce","prevHash","currVal","charCodeAt","Overview","loading","setLoading","error","setError","setEmployeeName","setSubordinateNames","fetchEmployeeDetails","a","axios","get","response","data","directSubordinates","useEffect","href","window","location","substring","lastIndexOf","getDirectSubordinateDetails","chart","getAllSubordinateNames","status","unescape","generateOrganizationChart","faArrowLeft","map","subordinateName","faUserAlt","toLowerCase","Routes","exact","path","component","to","NoMatch","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.2991f00a.chunk.js","sourcesContent":["import { faSearch } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { Combobox, ComboboxInput } from '@reach/combobox';\nimport '@reach/combobox/styles.css';\nimport { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport './Explorer.scss';\n\nconst Explorer = () => {\n  const [searchTerm, setSearchTerm] = useState('');\n  const history = useHistory();\n\n  const showOverview = (employeeName: string) => {\n    if (employeeName) {\n        history.push(`${process.env.PUBLIC_URL}/overview/${employeeName}`);\n    }\n  };\n\n  const handleKeyUp = (event: React.KeyboardEvent<HTMLInputElement>) => {\n    if (event.key === 'Enter') {\n      showOverview(searchTerm);\n    }\n  };\n\n  const handleSearchTermChange = (\n    event: React.ChangeEvent<HTMLInputElement>,\n  ) => {\n    setSearchTerm(event.target.value);\n  };\n\n  return (\n    <div className=\"explorer\">\n      <h4 id=\"title\">Employee Explorer</h4>\n      <div className=\"search_container\">\n        <Combobox aria-labelledby=\"title\" className=\"search_input\">\n          <ComboboxInput\n            placeholder=\"Search\"\n            onChange={handleSearchTermChange}\n            onKeyUp={handleKeyUp}\n          />\n        </Combobox>\n        <button\n          className=\"search_button\"\n          onClick={() => {\n            showOverview(searchTerm);\n          }}\n        >\n          <FontAwesomeIcon icon={faSearch} />\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default Explorer;\n","// eslint-disable-next-line import/no-anonymous-default-export\nexport default () => <>Page not found</>;\n","export interface IEmployeeDetails {\n    name: string;\n    title: string,\n    directSubordinates: string[];\n}\n\nclass Employee {\n    public id: number;\n    public reportsTo: Employee | null;\n    public readonly manages: Employee[];\n    public details: IEmployeeDetails\n\n    constructor(details: IEmployeeDetails) {\n        this.id = hashCode(`${details.name}__${details.title}`)\n        this.details = details;\n        this.reportsTo = null;\n        this.manages = [];\n    }\n}\n\nclass OrganizationChart {\n    private root: Employee;\n    constructor(employeeDetails: IEmployeeDetails) {\n        this.root = new Employee(employeeDetails);\n    }\n\n    public traverseDF(callback: (employee: Employee) => void): void {\n        (function recurse(employee) {\n            for (var i = 0, length = employee.manages.length; i < length; i++) {\n\n                recurse(employee.manages[i]);\n            }\n            callback(employee);\n        })(this.root);\n\n    }\n\n    public traverseBF(callback: (employee: Employee) => void): void {\n        var queue = new Queue();\n        queue.enqueue(this.root);\n        let employee = queue.dequeue();\n\n        while (employee) {\n            for (var i = 0, length = employee.manages.length; i < length; i++) {\n                queue.enqueue(employee.manages[i]);\n            }\n\n            callback(employee);\n            employee = queue.dequeue();\n        }\n    };\n\n    private contains(callback: any, traversal: any): void {\n        traversal.call(this, callback);\n    };\n\n    public add(employeeDetails: IEmployeeDetails, managerId: number, traversal: (callback: (employee: Employee) => void) => void) {\n        const child = new Employee(employeeDetails);\n        let reportsTo: any;\n\n        this.contains((employee: Employee) => {\n            if (employee.id === managerId) {\n                reportsTo = employee;\n            }\n        }, traversal);\n\n        if (reportsTo && reportsTo instanceof Employee) {\n            reportsTo.manages.push(child);\n            child.reportsTo = reportsTo;\n        } else {\n            throw new Error('Cannot add node to a non-existent parent.');\n        }\n    };\n\n    public getAllSubordinateNames(): string[] {\n        const subordinateNames: Set<string> = new Set();\n        this.traverseBF((employee: Employee) => {\n            subordinateNames.add(employee.details.name);\n        });\n        subordinateNames.delete(this.root.details.name);\n\n        return Array.from(subordinateNames);\n    }\n\n}\n\nclass Queue {\n    private elements: Employee[]\n    constructor() {\n        this.elements = [];\n    }\n\n    public enqueue(employee: Employee) {\n        this.elements.push(employee);\n    }\n\n    public dequeue() {\n        return this.elements.shift();\n    }\n}\n\nconst hashCode = (str: string) => {\n    return str.split('').reduce((prevHash, currVal) =>\n        (((prevHash << 5) - prevHash) + currVal.charCodeAt(0)) | 0, 0);\n}\n\n\n\nexport {\n    Employee,\n    OrganizationChart,\n    hashCode\n}","import axios from 'axios';\nimport { useEffect, useState } from 'react';\nimport { hashCode, IEmployeeDetails, OrganizationChart } from '../../OrgChart';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faArrowLeft, faUserAlt } from '@fortawesome/free-solid-svg-icons';\n\nimport './Overview.scss';\n\nconst Overview = () => {\n  const [loading, setLoading] = useState<boolean>(true);\n  const [error, setError] = useState<string>();\n  const [employeeName, setEmployeeName] = useState<string>();\n  const [subordinateNames, setSubordinateNames] = useState<string[]>([]);\n\n  const fetchEmployeeDetails = async (employeeName: string) => {\n    const response = await axios.get(\n      `//api.additivasia.io/api/v1/assignment/employees/${employeeName}`,\n    );\n\n    return {\n      name: employeeName,\n      title: response.data[0],\n      directSubordinates: response.data[1]\n        ? response.data[1]['direct-subordinates']\n        : null,\n    } as IEmployeeDetails;\n  };\n\n  useEffect(() => {\n    const { href } = window.location;\n    const employeeName = href.substring(href.lastIndexOf('/') + 1);\n\n    const getDirectSubordinateDetails = async (\n      employeeDetails: IEmployeeDetails,\n      chart: OrganizationChart,\n    ) => {\n      if (\n        employeeDetails.directSubordinates &&\n        employeeDetails.directSubordinates.length\n      ) {\n        for (let i = 0; i < employeeDetails.directSubordinates.length; i++) {\n          const employee = await fetchEmployeeDetails(\n            employeeDetails.directSubordinates[i],\n          );\n\n          chart.add(\n            employee,\n            hashCode(`${employeeDetails.name}__${employeeDetails.title}`),\n            chart.traverseBF,\n          );\n\n          await getDirectSubordinateDetails(employee, chart);\n        }\n      }\n    };\n\n    const generateOrganizationChart = async () => {\n      try {\n        const employeeDetails = await fetchEmployeeDetails(employeeName);\n        const chart = new OrganizationChart(employeeDetails);\n        await getDirectSubordinateDetails(employeeDetails, chart);\n\n        setEmployeeName(employeeName);\n        setSubordinateNames(chart.getAllSubordinateNames());\n        setLoading(false);\n        setError('');\n      } catch (error) {\n        setEmployeeName('');\n        setSubordinateNames([]);\n        setLoading(false);\n        setError(\n          error.response && error.response.status === 404\n            ? `Employee ${unescape(employeeName)} not found`\n            : 'Something went wrong!',\n        );\n      }\n    };\n\n    generateOrganizationChart();\n  }, []);\n\n  return (\n    <div className=\"overview\">\n      {loading ? (\n        'Loading'\n      ) : (\n        <div>\n          <div className=\"back_button\">\n            <a href={`${process.env.PUBLIC_URL}/explorer`}>\n              {' '}\n              <FontAwesomeIcon icon={faArrowLeft} />\n              Back to explorer\n            </a>\n          </div>\n          <h4>Employee Overview</h4>\n          {employeeName && subordinateNames && (\n            <div>\n              <div>Subordinates of employee {unescape(employeeName)}</div>\n              <div className=\"subordinates-list\">\n                {subordinateNames.length\n                  ? subordinateNames.map((subordinateName) => (\n                      <div\n                        key={subordinateName.toLowerCase()}\n                        className=\"subordinates-list__item\"\n                      >\n                        <a\n                          href={`${process.env.PUBLIC_URL}/overview/${subordinateName}`}\n                        >\n                          <FontAwesomeIcon icon={faUserAlt} />\n                          {subordinateName}\n                        </a>\n                      </div>\n                    ))\n                  : 'None'}\n              </div>\n            </div>\n          )}\n        </div>\n      )}\n      {error ? error : null}\n    </div>\n  );\n};\n\nexport default Overview;\n","import { Route, Switch, Redirect } from 'react-router-dom';\nimport Explorer from './views/explorer/Explorer';\nimport NoMatch from './views/common/NoMatch';\nimport Overview from './views/overview/Overview';\n\nexport const Routes = () => {\n  return (\n    <div>\n      <Switch>\n        <Route\n          exact\n          path={`${process.env.PUBLIC_URL}/explorer`}\n          component={Explorer}\n        />\n        <Route exact path={`${process.env.PUBLIC_URL}/`}>\n          <Redirect to={`${process.env.PUBLIC_URL}/explorer`} />\n        </Route>\n        <Route\n          path={`${process.env.PUBLIC_URL}/overview/:name`}\n          component={Overview}\n        />\n        <Route component={NoMatch} />\n      </Switch>\n    </div>\n  );\n};\n","import { BrowserRouter as Router } from 'react-router-dom';\nimport './App.scss';\nimport { Routes } from './Routes';\n\nfunction App() {\n  return (\n    <div className=\"app\">\n      <section className=\"app-main\">\n        <Router>\n          <Routes />\n        </Router>\n      </section>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.scss';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}